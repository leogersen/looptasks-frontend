{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{toast,ToastContainer}from'react-toastify';import TaskService from'../api/TaskService';import\"react-toastify/dist/ReactToastify.css\";import{Redirect}from'react-router-dom';import Alert from'./Alert';import AuthService from'../api/AuthService';import Spinner from'./Spinner';import Moment from'react-moment';var TaskListTable=/*#__PURE__*/function(_Component){_inherits(TaskListTable,_Component);var _super=_createSuper(TaskListTable);function TaskListTable(props){var _this;_classCallCheck(this,TaskListTable);_this=_super.call(this,props);_this.state={tasks:[],editId:0,loading:false,alert:null};_this.onDeleteHandler=_this.onDeleteHandler.bind(_assertThisInitialized(_this));_this.onStatusChangeHandler=_this.onStatusChangeHandler.bind(_assertThisInitialized(_this));_this.onEditHandler=_this.onEditHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(TaskListTable,[{key:\"componentDidMount\",value:function componentDidMount(){this.listTasks();}},{key:\"listTasks\",value:function listTasks(){var _this2=this;if(!AuthService.isAuthenticated()){return;}this.setState({loading:true});TaskService.list(function(tasks){return _this2.setState({tasks:tasks,loading:false});},function(error){return _this2.setErrorState(error);});}},{key:\"setErrorState\",value:function setErrorState(error){this.setState({alert:\"Erro na requisi\\xE7\\xE3o:  \".concat(error.message),loading:false});}},{key:\"onDeleteHandler\",value:function onDeleteHandler(id){var _this3=this;if(window.confirm(\"Deseja mesmo excluir essa tarefa?\"))TaskService.delete(id,function(){_this3.listTasks();toast.success(\"Tarefa excluída!\",{position:toast.POSITION.BOTTOM_LEFT});},function(error){return _this3.setErrorState(error);});}},{key:\"onEditHandler\",value:function onEditHandler(id){this.setState({editId:id});}},{key:\"onStatusChangeHandler\",value:function onStatusChangeHandler(task){var _this4=this;task.done=!task.done;TaskService.save(task,function(){var tasks=_this4.state.tasks.map(function(t){return t.id!==task.id?t:task;});_this4.setState({tasks:tasks});},function(error){return _this4.setErrorState(error);});}},{key:\"render\",value:function render(){if(!AuthService.isAuthenticated()){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}if(this.state.editId>0){return/*#__PURE__*/_jsx(Redirect,{to:\"/form/\".concat(this.state.editId)});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Lista de Tarefas\"}),this.state.alert!=null?/*#__PURE__*/_jsx(Alert,{message:this.state.alert}):\"\",this.state.loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(TableHeader,{}),this.state.tasks.length>0?/*#__PURE__*/_jsx(TableBody,{tasks:this.state.tasks,onDelete:this.onDeleteHandler,onEdit:this.onEditHandler,onStatusChange:this.onStatusChangeHandler}):/*#__PURE__*/_jsx(EmptyTableBody,{})]}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:1500})]});}}]);return TaskListTable;}(Component);var TableHeader=function TableHeader(){return/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Data\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"A\\xE7\\xF5es\"})]})});};var TableBody=function TableBody(props){return/*#__PURE__*/_jsx(\"tbody\",{children:props.tasks.map(function(task){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.done,onChange:function onChange(){return props.onStatusChange(task);}}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:task.done?/*#__PURE__*/_jsxs(\"s\",{children:[\" \",task.description,\" \"]}):task.description}),/*#__PURE__*/_jsx(\"td\",{children:task.done?/*#__PURE__*/_jsxs(\"s\",{children:[\" \",/*#__PURE__*/_jsx(Moment,{format:\"DD/MM/YYYY\",children:task.whenToDo}),\" \"]}):/*#__PURE__*/_jsx(Moment,{format:\"DD/MM/YYYY\",children:task.whenToDo})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"btn btn-primary\",type:\"button\",value:\"Editar\",onClick:function onClick(){return props.onEdit(task.id);}}),\"\\xA0\",/*#__PURE__*/_jsx(\"input\",{className:\"btn btn-danger\",type:\"button\",value:\"Excluir\",onClick:function onClick(){return props.onDelete(task.id);}})]})]},task.id);})});};var EmptyTableBody=function EmptyTableBody(props){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"Sem tarefas cadastradas no momento!\"})})});};export default TaskListTable;","map":{"version":3,"sources":["C:/Users/leand/Documents/workspace/loop-frontend/src/components/TaskListTable.js"],"names":["React","Component","toast","ToastContainer","TaskService","Redirect","Alert","AuthService","Spinner","Moment","TaskListTable","props","state","tasks","editId","loading","alert","onDeleteHandler","bind","onStatusChangeHandler","onEditHandler","listTasks","isAuthenticated","setState","list","error","setErrorState","message","id","window","confirm","delete","success","position","POSITION","BOTTOM_LEFT","task","done","save","map","t","length","TableHeader","TableBody","onStatusChange","description","whenToDo","onEdit","onDelete","EmptyTableBody"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport TaskService from '../api/TaskService';\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport Alert from './Alert';\r\nimport AuthService from '../api/AuthService';\r\nimport Spinner from './Spinner';\r\nimport Moment from 'react-moment';\r\n\r\nclass TaskListTable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n\r\n        this.state = {\r\n            tasks: [],\r\n            editId: 0,\r\n            loading: false,\r\n            alert: null\r\n\r\n        }\r\n\r\n        this.onDeleteHandler = this.onDeleteHandler.bind(this);\r\n        this.onStatusChangeHandler = this.onStatusChangeHandler.bind(this);\r\n        this.onEditHandler = this.onEditHandler.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.listTasks();\r\n\r\n    }\r\n\r\n    listTasks() {\r\n        if (!AuthService.isAuthenticated()) {\r\n            return;\r\n        }\r\n\r\n        this.setState({ loading: true });\r\n        TaskService.list(\r\n            tasks => this.setState({tasks : tasks, loading: false}),\r\n            error => this.setErrorState(error)\r\n        );\r\n    }\r\n\r\n    setErrorState(error) {\r\n        this.setState({alert: `Erro na requisição:  ${error.message}`, loading: false})\r\n    }\r\n\r\n    onDeleteHandler(id) {\r\n        if (window.confirm(\"Deseja mesmo excluir essa tarefa?\"))\r\n\r\n        TaskService.delete(id,\r\n            () => {\r\n            this.listTasks();\r\n            toast.success(\"Tarefa excluída!\", { position: toast.POSITION.BOTTOM_LEFT });\r\n            },\r\n            error => this.setErrorState(error));\r\n\r\n     \r\n    }\r\n\r\n    onEditHandler(id) {\r\n        this.setState({ editId: id });\r\n    }\r\n\r\n    onStatusChangeHandler(task) {\r\n            task.done = !task.done;\r\n\r\n            TaskService.save(task,\r\n                \r\n                () => {\r\n                    const tasks = this.state.tasks.map(t => t.id !== task.id ? t : task);\r\n                    this.setState({ tasks: tasks});\r\n\r\n                },\r\n                error => this.setErrorState(error));\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        if (!AuthService.isAuthenticated()) {\r\n            return <Redirect to=\"/login\" />;\r\n            \r\n        }\r\n\r\n        if (this.state.editId > 0){\r\n            return <Redirect to={`/form/${this.state.editId}`} />\r\n        } \r\n\r\n\r\n\r\n        return (\r\n            <div>\r\n                <h1>Lista de Tarefas</h1>\r\n                {this.state.alert != null ? <Alert message={this.state.alert} /> : \"\"}\r\n                {this.state.loading ? <Spinner/> :\r\n                <table className=\"table table-striped\">\r\n                    <TableHeader />\r\n                   {this.state.tasks.length > 0 ? <TableBody\r\n                        tasks={this.state.tasks}\r\n                        onDelete={this.onDeleteHandler} \r\n                        onEdit={this.onEditHandler}\r\n                        onStatusChange={this.onStatusChangeHandler}\r\n                        />\r\n                    :\r\n                    <EmptyTableBody />}\r\n                </table>\r\n    }\r\n                <ToastContainer autoClose={1500} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst TableHeader = () => {\r\n    return (\r\n        <thead className=\"table-dark\">\r\n            <tr>\r\n                <th scope=\"col\">Status</th>\r\n                <th scope=\"col\">Descrição</th>\r\n                <th scope=\"col\">Data</th>\r\n                <th scope=\"col\">Ações</th>\r\n            </tr>\r\n        </thead>\r\n    )\r\n}\r\n\r\nconst TableBody = (props) => {\r\n    return (\r\n        <tbody>\r\n            {props.tasks.map(task =>\r\n                <tr key={task.id}>\r\n                    <td><input \r\n                        type=\"checkbox\" \r\n                        checked={task.done} \r\n                        onChange={() => props.onStatusChange(task)}\r\n                        /> </td>\r\n                    <td>{ task.done ? <s> {task.description} </s> : task.description }</td>\r\n                    <td>{ task.done ? <s> <Moment format=\"DD/MM/YYYY\">{task.whenToDo}</Moment> </s> \r\n                    :  <Moment format=\"DD/MM/YYYY\">{task.whenToDo}</Moment> }\r\n                    </td>\r\n                    <td>\r\n                        <input \r\n                        className=\"btn btn-primary\" \r\n                        type=\"button\" \r\n                        value=\"Editar\"\r\n                        onClick={() => props.onEdit(task.id)} />\r\n                        &nbsp;<input\r\n                            className=\"btn btn-danger\"\r\n                            type=\"button\"\r\n                            value=\"Excluir\"\r\n                            onClick={() => props.onDelete(task.id)} />\r\n                    </td>\r\n                </tr>\r\n            )}\r\n        </tbody>\r\n\r\n\r\n    )\r\n}\r\n\r\nconst EmptyTableBody = (props) => {\r\n    return (\r\n\r\n    <tbody>\r\n        <tr>\r\n           <td colSpan=\"4\">Sem tarefas cadastradas no momento!</td> \r\n        </tr>\r\n\r\n    </tbody>)\r\n}\r\n\r\nexport default TaskListTable;"]},"metadata":{},"sourceType":"module"}