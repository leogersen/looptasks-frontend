{"ast":null,"code":"import _classCallCheck from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from\"axios\";import{API_ENDPOINT}from\"../constants\";import AuthService from\"./AuthService\";var TaskService=/*#__PURE__*/function(){function TaskService(){_classCallCheck(this,TaskService);}_createClass(TaskService,[{key:\"list\",value:function list(onFetch,onError){axios.get(\"\".concat(API_ENDPOINT,\"/tasks?sort=whenToDo,asc\"),this.buildAuthHeader()).then(function(response){return onFetch(response.data.content);}).catch(function(e){return onError(e);});}},{key:\"load\",value:function load(id,onLoad,onError){axios.get(\"\".concat(API_ENDPOINT,\"/tasks/\").concat(id),this.buildAuthHeader()).then(function(response){return onLoad(response.data);}).catch(function(e){return onError(e);});}},{key:\"delete\",value:function _delete(id,onDelete,onError){axios.delete(\"\".concat(API_ENDPOINT,\"/tasks/\").concat(id),this.buildAuthHeader()).then(function(){return onDelete();}).catch(function(e){return onError(e);});}},{key:\"save\",value:function save(task,onSave,onError){if(task.id===0){axios.post(\"\".concat(API_ENDPOINT,\"/tasks\"),task,this.buildAuthHeader()).then(function(){return onSave();}).catch(function(e){return onError(e);});}else{axios.put(\"\".concat(API_ENDPOINT,\"/tasks/\").concat(task.id),task,this.buildAuthHeader()).then(function(){return onSave();}).catch(function(e){return onError(e);});}}},{key:\"buildAuthHeader\",value:function buildAuthHeader(){return{headers:{\"authorization\":\"Bearer \".concat(AuthService.getJWTToken())}};}}]);return TaskService;}();export default new TaskService();","map":{"version":3,"sources":["C:/Users/leand/Documents/workspace/loop-frontend/src/api/TaskService.js"],"names":["axios","API_ENDPOINT","AuthService","TaskService","onFetch","onError","get","buildAuthHeader","then","response","data","content","catch","e","id","onLoad","onDelete","delete","task","onSave","post","put","headers","getJWTToken"],"mappings":"4UAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,cAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,C,GAEMC,CAAAA,W,6IAGGC,O,CAASC,O,CAAS,CACnBL,KAAK,CACJM,GADD,WACQL,YADR,6BACgD,KAAKM,eAAL,EADhD,EAECC,IAFD,CAEM,SAAAC,QAAQ,QAAIL,CAAAA,OAAO,CAACK,QAAQ,CAACC,IAAT,CAAcC,OAAf,CAAX,EAFd,EAGCC,KAHD,CAGO,SAAAC,CAAC,QAAIR,CAAAA,OAAO,CAACQ,CAAD,CAAX,EAHR,EAKH,C,kCAEIC,E,CAAIC,M,CAAQV,O,CAAS,CACtBL,KAAK,CACJM,GADD,WACQL,YADR,mBAC8Ba,EAD9B,EACoC,KAAKP,eAAL,EADpC,EAECC,IAFD,CAEM,SAAAC,QAAQ,QAAIM,CAAAA,MAAM,CAACN,QAAQ,CAACC,IAAV,CAAV,EAFd,EAGCE,KAHD,CAGO,SAAAC,CAAC,QAAIR,CAAAA,OAAO,CAACQ,CAAD,CAAX,EAHR,EAIH,C,uCAEMC,E,CAAIE,Q,CAAUX,O,CAAS,CAC1BL,KAAK,CACJiB,MADD,WACWhB,YADX,mBACiCa,EADjC,EACuC,KAAKP,eAAL,EADvC,EAECC,IAFD,CAEM,iBAAMQ,CAAAA,QAAQ,EAAd,EAFN,EAGCJ,KAHD,CAGO,SAAAC,CAAC,QAAIR,CAAAA,OAAO,CAACQ,CAAD,CAAX,EAHR,EAKH,C,kCAEIK,I,CAAMC,M,CAAQd,O,CAAS,CACxB,GAAIa,IAAI,CAACJ,EAAL,GAAY,CAAhB,CAAmB,CACfd,KAAK,CACAoB,IADL,WACanB,YADb,WACmCiB,IADnC,CACyC,KAAKX,eAAL,EADzC,EAEKC,IAFL,CAEU,iBAAMW,CAAAA,MAAM,EAAZ,EAFV,EAGKP,KAHL,CAGW,SAAAC,CAAC,QAAIR,CAAAA,OAAO,CAACQ,CAAD,CAAX,EAHZ,EAIH,CALD,IAKM,CACFb,KAAK,CACAqB,GADL,WACYpB,YADZ,mBACkCiB,IAAI,CAACJ,EADvC,EAC6CI,IAD7C,CACmD,KAAKX,eAAL,EADnD,EAEKC,IAFL,CAEU,iBAAMW,CAAAA,MAAM,EAAZ,EAFV,EAGKP,KAHL,CAGW,SAAAC,CAAC,QAAIR,CAAAA,OAAO,CAACQ,CAAD,CAAX,EAHZ,EAIH,CACJ,C,yDAEiB,CACd,MAAO,CACHS,OAAO,CAAE,CACL,iCAA2BpB,WAAW,CAACqB,WAAZ,EAA3B,CADK,CADN,CAAP,CAKH,C,2BAGL,cAAe,IAAIpB,CAAAA,WAAJ,EAAf","sourcesContent":["import axios from \"axios\";\r\nimport { API_ENDPOINT } from \"../constants\";\r\nimport AuthService from \"./AuthService\";\r\n\r\nclass TaskService {\r\n\r\n\r\n    list(onFetch, onError) {\r\n        axios\r\n        .get(`${API_ENDPOINT}/tasks?sort=whenToDo,asc`, this.buildAuthHeader())\r\n        .then(response => onFetch(response.data.content))\r\n        .catch(e => onError(e));\r\n\r\n    }\r\n\r\n    load(id, onLoad, onError) {\r\n        axios\r\n        .get(`${API_ENDPOINT}/tasks/${id}`, this.buildAuthHeader())\r\n        .then(response => onLoad(response.data))\r\n        .catch(e => onError(e));\r\n    }\r\n\r\n    delete(id, onDelete, onError) {\r\n        axios\r\n        .delete(`${API_ENDPOINT}/tasks/${id}`, this.buildAuthHeader())\r\n        .then(() => onDelete())\r\n        .catch(e => onError(e));\r\n        \r\n    }\r\n\r\n    save(task, onSave, onError) {\r\n        if (task.id === 0) {\r\n            axios\r\n                .post(`${API_ENDPOINT}/tasks`, task, this.buildAuthHeader())\r\n                .then(() => onSave())\r\n                .catch(e => onError(e));\r\n        }else {\r\n            axios\r\n                .put(`${API_ENDPOINT}/tasks/${task.id}`, task, this.buildAuthHeader())\r\n                .then(() => onSave())\r\n                .catch(e => onError(e));\r\n        }\r\n    }\r\n    \r\n    buildAuthHeader() {\r\n        return {\r\n            headers: {\r\n                \"authorization\": `Bearer ${AuthService.getJWTToken()}`\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\nexport default new TaskService();\r\n"]},"metadata":{},"sourceType":"module"}