{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/leand/Documents/workspace/loop-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import AuthService from'../api/AuthService';import TaskService from'../api/TaskService';import Spinner from'./Spinner';import Alert from'./Alert';var TaskForm=/*#__PURE__*/function(_Component){_inherits(TaskForm,_Component);var _super=_createSuper(TaskForm);function TaskForm(props){var _this;_classCallCheck(this,TaskForm);_this=_super.call(this,props);_this.state={task:{id:0,description:\"\",whenToDo:\"\"},redirect:false,buttomName:\"Cadastrar\",alert:null,loading:false,saving:false};_this.onSubmitHandler=_this.onSubmitHandler.bind(_assertThisInitialized(_this));_this.onInputChangeHandler=_this.onInputChangeHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(TaskForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var editId=this.props.match.params.id;if(editId){this.setState({loading:true});TaskService.load(~~editId,function(task){return _this2.setState({task:task,loading:false,buttomName:\"Alterar\"});},function(error){if(error.response){if(error.response.status===404){_this2.setErrorState(\"Tarefa não encontrada\");}else{_this2.setErrorState(\"Erro ao carregar dados: \".concat(error.response));}}else{_this2.setErrorState(\"Erro na requisi\\xE7\\xE3o: \".concat(error.message));}});}}},{key:\"setErrorState\",value:function setErrorState(error){this.setState({alert:error,loading:false,saving:false});}},{key:\"onSubmitHandler\",value:function onSubmitHandler(event){var _this3=this;event.preventDefault();this.setState({saving:true,alert:null});TaskService.save(this.state.task,function(){return _this3.setState({redirect:true,saving:false});},function(error){if(error.response){_this3.setErrorState(\"Erro: \".concat(error.response.data.error));}else{_this3.setErrorState(\"Erro na requisi\\xE7\\xE3o: \".concat(error.message));}});}},{key:\"onInputChangeHandler\",value:function onInputChangeHandler(event){var field=event.target.name;var value=event.target.value;this.setState(function(prevState){return{task:_objectSpread(_objectSpread({},prevState.task),{},_defineProperty({},field,value))};});console.log(this.state.task);}},{key:\"render\",value:function render(){var _this4=this;if(!AuthService.isAuthenticated()){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}if(this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}if(this.state.loading){return/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Cadastro da Tarefa\"}),this.state.alert!=null?/*#__PURE__*/_jsx(Alert,{message:this.state.alert}):\"\",/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"description\",value:this.state.task.description,placeholder:\"Digite a descri\\xE7\\xE3o\",onChange:this.onInputChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"whenToDo\",children:\"Data\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",name:\"whenToDo\",value:this.state.task.whenToDo,placeholder:\"Informe a data\",onChange:this.onInputChangeHandler})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:this.state.saving,children:this.state.saving?/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\",role:\"status\",\"aria-hidden\":\"true\"}):this.state.buttomName}),\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(){return _this4.setState({redirect:true});},children:\"Cancelar\"})]})]});}}]);return TaskForm;}(Component);export default TaskForm;","map":{"version":3,"sources":["C:/Users/leand/Documents/workspace/loop-frontend/src/components/TaskForm.js"],"names":["React","Component","Redirect","AuthService","TaskService","Spinner","Alert","TaskForm","props","state","task","id","description","whenToDo","redirect","buttomName","alert","loading","saving","onSubmitHandler","bind","onInputChangeHandler","editId","match","params","setState","load","error","response","status","setErrorState","message","event","preventDefault","save","data","field","target","name","value","prevState","console","log","isAuthenticated"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport AuthService from '../api/AuthService';\r\nimport TaskService from '../api/TaskService';\r\nimport Spinner from './Spinner';\r\nimport Alert from './Alert';\r\n\r\nclass TaskForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            task: {\r\n                id: 0,\r\n                description: \"\",\r\n                whenToDo: \"\"\r\n            },\r\n            redirect: false,\r\n            buttomName: \"Cadastrar\",\r\n            alert: null,\r\n            loading: false,\r\n            saving: false\r\n\r\n        }\r\n\r\n        this.onSubmitHandler = this.onSubmitHandler.bind(this);\r\n        this.onInputChangeHandler = this.onInputChangeHandler.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const editId = this.props.match.params.id;\r\n        if (editId) {\r\n            this.setState({ loading: true });\r\n            TaskService.load(~~editId,\r\n                task => this.setState({ task: task, loading: false, buttomName: \"Alterar\" }),\r\n                error => {\r\n                    if (error.response) {\r\n                        if (error.response.status === 404) {\r\n                            this.setErrorState(\"Tarefa não encontrada\");\r\n                        } else {\r\n                            this.setErrorState(`Erro ao carregar dados: ${error.response}`);\r\n                        }\r\n\r\n                    } else {\r\n                        this.setErrorState(`Erro na requisição: ${error.message}`);\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n    setErrorState(error) {\r\n        this.setState({ alert: error, loading: false, saving: false })\r\n    }\r\n\r\n\r\n    onSubmitHandler(event) {\r\n        event.preventDefault();\r\n        this.setState({ saving: true, alert: null });\r\n        TaskService.save(this.state.task,\r\n            () => this.setState({ redirect: true, saving: false }),\r\n            error => {\r\n                if (error.response) {\r\n                    this.setErrorState(`Erro: ${error.response.data.error}`);\r\n                } else {\r\n                    this.setErrorState(`Erro na requisição: ${error.message}`);\r\n                }\r\n\r\n            })\r\n\r\n\r\n    }\r\n\r\n    onInputChangeHandler(event) {\r\n        const field = event.target.name;\r\n        const value = event.target.value;\r\n        this.setState(prevState => ({ task: { ...prevState.task, [field]: value } }));\r\n        console.log(this.state.task);\r\n    }\r\n\r\n    render() {\r\n\r\n        if (!AuthService.isAuthenticated()) {\r\n            return <Redirect to=\"/login\" />;\r\n\r\n        }\r\n\r\n        if (this.state.redirect) {\r\n            return <Redirect to=\"/\" />\r\n        }\r\n        if (this.state.loading) {\r\n            return <Spinner />;\r\n\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <h1>Cadastro da Tarefa</h1>\r\n                {this.state.alert != null ? <Alert message={this.state.alert} /> : \"\"}\r\n                <form onSubmit={this.onSubmitHandler}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"description\">Descrição</label>\r\n                        <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            name=\"description\"\r\n                            value={this.state.task.description}\r\n                            placeholder=\"Digite a descrição\"\r\n                            onChange={this.onInputChangeHandler} />\r\n\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"whenToDo\">Data</label>\r\n                        <input type=\"date\"\r\n                            className=\"form-control\"\r\n                            name=\"whenToDo\"\r\n                            value={this.state.task.whenToDo}\r\n                            placeholder=\"Informe a data\"\r\n                            onChange={this.onInputChangeHandler} />\r\n                    </div>\r\n                    <br />\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary\"\r\n                        disabled={this.state.saving}>\r\n\r\n                        {\r\n                            this.state.saving ?\r\n                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\r\n                                : this.state.buttomName\r\n\r\n                        }\r\n\r\n                    </button>\r\n                    &nbsp;&nbsp;\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-primary\"\r\n                        onClick={() => this.setState({ redirect: true })}>\r\n                        Cancelar\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TaskForm;"]},"metadata":{},"sourceType":"module"}